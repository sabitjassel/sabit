<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student & Subjects</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f6f9;
      color: #222;
    }

    .container {
      max-width: 1000px;
      margin: 40px auto;
      padding: 0 16px;
    }

    header {
      text-align: center;
      margin-bottom: 25px;
    }

    header h1 {
      margin: 0;
      font-size: 26px;
    }

    header p {
      margin: 8px 0 0;
      color: #666;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
    }

    .card {
      background: #fff;
      border-radius: 10px;
      padding: 18px 18px 14px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
    }

    .card h2 {
      margin: 0 0 12px;
      font-size: 18px;
    }

    /* Student list */
    #student-list {
      margin: 0;
      padding-left: 18px;
      line-height: 1.9;
    }

    /* Search */
    .search-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }

    .search-input {
      flex: 1;
      min-width: 240px;
      max-width: 700px;
      padding: 10px 12px;
      border: 1px solid #cfcfcf;
      border-radius: 8px;
      font-size: 14px;
      outline: none;
    }

    .search-input:focus {
      border-color: #777;
    }

    /* Table */
    .table-wrap {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
      background: #fff;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
      vertical-align: top;
    }

    thead th {
      background: #eef2f7;
      font-weight: bold;
    }

    tbody tr:hover {
      background: #f7f9fc;
    }

    /* Responsive spacing */
    @media (min-width: 900px) {
      .grid {
        grid-template-columns: 1fr 1fr;
      }
      /* Put Subjects wider on desktop if you want */
      .subjects-card {
        grid-column: span 2;
      }
    }
  </style>
</head>

<body>
  <div class="container">

    <header>
      <h1>Student Information</h1>
      <p>Student List and Subjects Taken </p>
    </header>

    <main class="grid">

      <!-- STUDENT LIST -->
      <section id="students" class="card">
        <h2>Student List</h2>
        <ul id="student-list"></ul>
      </section>

      <!-- SUBJECTS TAKEN -->
      <section id="subjects" class="card subjects-card">
        <h2>Subjects Taken</h2>

        <div class="search-row">
          <input
            type="text"
            id="course-search"
            class="search-input"
            placeholder="Search subject (e.g., programming, discrete, web system)..."
            aria-label="Search subjects"
          >
        </div>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Year</th>
                <th>Sem</th>
                <th>Code</th>
                <th>Description</th>
                <th>Credit</th>
              </tr>
            </thead>
            <tbody id="courses-body"></tbody>
          </table>
        </div>
      </section>

    </main>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // ===== STUDENTS =====
  fetch("https://sabitjassel.github.io/sabit/students.json")
    .then(res => res.json())
    .then(data => {
      const list = document.getElementById("student-list");
      list.innerHTML = "";

      if (Array.isArray(data.students)) {
        data.students.forEach(student => {
          const li = document.createElement("li");
          li.textContent = `${student.name} - ${student.age} (Course: ${student.course})`;
          list.appendChild(li);
        });
      } else {
        console.error("students.json must contain { students: [ ... ] }");
      }
    })
    .catch(err => console.error("Error loading students.json:", err));

  // ===== COURSES =====
  let allCourses = [];

  function renderCourses(courses) {
    const tbody = document.getElementById("courses-body");
    tbody.innerHTML = "";

    courses.forEach(course => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${course.year_level ?? ""}</td>
        <td>${course.sem ?? ""}</td>
        <td>${course.code ?? ""}</td>
        <td>${course.description ?? ""}</td>
        <td>${course.credit ?? ""}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  fetch("https://sabitjassel.github.io/sabit/courses.json")
    .then(res => res.json())
    .then(data => {
      if (Array.isArray(data.courses)) {
        allCourses = data.courses;
        renderCourses(allCourses);
      } else {
        console.error("courses.json must contain { courses: [ ... ] }");
      }
    })
    .catch(err => console.error("Error loading courses.json:", err));

  // ===== SEARCH (dynamic) =====
  const searchBox = document.getElementById("course-search");
  searchBox.addEventListener("input", () => {
    const query = searchBox.value.trim().toLowerCase();

    const filtered = allCourses.filter(course =>
      String(course.description || "").toLowerCase().includes(query) ||
      String(course.code || "").toLowerCase().includes(query)
    );

    renderCourses(filtered);
  });

});
</script>

</body>
</html>

